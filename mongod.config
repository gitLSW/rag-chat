# MongoDB configuration file for security

# Network settings: Bind to localhost (127.0.0.1) only, no external access
net:
  bindIp: 127.0.0.1  # Only allow access from the local machine
  port: 27017        # Default MongoDB port

# Security settings: Disable TLS for local access, use authentication
security:
  authorization: enabled
  keyFile: /path/to/your/keyfile  # Ensure the key file is properly set for replica sets

# Disable external access to prevent accidental exposure
setParameter:
  enableLocalhostAuthBypass: false  # Prevent localhost bypass for auth

# Storage: Enable encryption at rest (optional, enable if needed)
storage:
  dbPath: /var/lib/mongodb
  journal:
    enabled: true
  # Optional: Enable encryption at rest
  encryption:
    enabled: true
    encryptionKeyFile: /path/to/your/encryption/keyfile  # Path to encryption key (if required)

# Operation profiling settings (optional for monitoring)
operationProfiling:
  slowOpThresholdMs: 100  # Log queries taking longer than 100ms

# SystemLog: Log file configuration
systemLog:
  destination: file
  path: /var/log/mongodb/mongod.log
  logAppend: true
  logRotate: reopen

# Storage engine settings (WiredTiger is the default and recommended)
storage:
  engine: wiredTiger
  wiredTiger:
    engineConfig:
      cacheSizeGB: 2  # Configure this based on your system's available RAM
